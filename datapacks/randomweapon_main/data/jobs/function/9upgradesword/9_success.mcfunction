# 공통 효과 재생
tellraw @s {text:"강화 성공!",color:"green",bold:true}
execute at @s run playsound entity.player.levelup block @a ~ ~ ~ 2 1

# 강화 - 웅크리기 시간 초기화
execute as @a[tag=itemUsed9] at @s if score @s 9_sneakTime matches 61 run scoreboard players set @s 9_sneakTime 0

# 지급
execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:0}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:1},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:1,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+1]",color:"#70ff54"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"2"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1

execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:1}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:2},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:3,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+2]",color:"#70ff54"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"4"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1

execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:2}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:3},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:5,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+3]",color:"#fcff3c"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"6"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1

execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:3}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:4},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:7,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+4]",color:"#fcff3c"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"8"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1

execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:4}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:5},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:9,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+5]",color:"#ff2e2e"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"10"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1

execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:5}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:6},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:11,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+6]",color:"#ff2e2e"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"12"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1

execute if entity @s[nbt={SelectedItem:{components:{"minecraft:custom_data":{upgrade:6}}}}] run return run item replace entity @s weapon.mainhand with iron_sword[custom_data={specialNo:9,upgrade:7},attribute_modifiers=[{id:"attack_damage",type:"attack_damage",amount:998,operation:"add_value"}],custom_name=[{text:"강화 검 ",color:"white",italic:false},{text:"[+7]",color:"#a00000"}],lore=[[{bold:true,color:"red",italic:false,text:"현재 공격력: "},{color:"light_purple",text:"999"}],[{bold:true,color:"yellow",italic:false,"keybind":"key.sneak"},{bold:false,color:"white",text:"를"},{color:"dark_green",text:" 3초간"},{bold:false,color:"white",text:" 꾹 누르고 있으면 "},{color:"blue",text:"강화"},{bold:false,color:"white",text:"할 수 있습니다."}],[{bold:false,color:"white",italic:false,text:"강화에 성공 시 공격력이 "},{bold:true,color:"green",italic:false,text:"2"}," 오릅니다."],[{color:"white",italic:false,text:"강화에 실패시 "},{bold:true,color:"red",text:"5"}," 의 체력이 깎입니다."],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",italic:false,text:"7강"},"까지 존재합니다. 강화 확률은 아래를 참조해주세요."],[""],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"1강 "},"95% / ",{bold:true,color:"yellow",text:"2강 "},"80% / ",{bold:true,color:"yellow",text:"3강"}," 50% / ",{bold:true,color:"yellow",text:"4강"}," 30%"],[{color:"white",italic:false,text:""},{bold:true,color:"yellow",text:"5강 "},"20% / ",{bold:true,color:"yellow",text:"6강"}," 20% /",{bold:true,color:"yellow",text:" 7강"}," 10% (번외: 7강은 공격력이 999가 됩니다.)"]]] 1