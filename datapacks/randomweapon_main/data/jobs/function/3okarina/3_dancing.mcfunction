# 3tick의 specialTick이 1 이상일 때에만 실행됨. 설정되는 값 400 (16초)

# 억울하게 죽는 사람 없도록...
execute if score 3tick specialTick matches 400 run tag @a remove okarinaDanceDeath

# 음악 재생
execute if score 3tick specialTick matches 400 store result score rand 3_random run random value 1..8
execute if score 3tick specialTick matches 400 if score rand 3_random matches 1 at @a[tag=itemUsed3User] run playsound music_disc.cat block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 2 at @a[tag=itemUsed3User] run playsound music_disc.chirp block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 3 at @a[tag=itemUsed3User] run playsound music_disc.pigstep block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 4 at @a[tag=itemUsed3User] run playsound music_disc.ward block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 5 at @a[tag=itemUsed3User] run playsound music_disc.far block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 6 at @a[tag=itemUsed3User] run playsound music_disc.blocks block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 7 at @a[tag=itemUsed3User] run playsound music_disc.otherside block @a[tag=!itemUsed5] ~ ~ ~ 2 1
execute if score 3tick specialTick matches 400 if score rand 3_random matches 8 at @a[tag=itemUsed3User] run playsound music_disc.precipice block @a[tag=!itemUsed5] ~ ~ ~ 2 1.5
scoreboard players set rand 3_random 0

# 돌려돌려 (귀마개 낀 사람 제외, 물론 멈춰는 있게 할거임)
execute if score 3tick specialTick matches 301..400 at @a[tag=itemUsed3User] as @a[distance=11..,tag=participating] run attribute @s jump_strength modifier remove item:3_item_nojump
execute if score 3tick specialTick matches 301..400 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating,tag=!itemUsed5] at @s run rotate @s ~10 0
execute if score 3tick specialTick matches 301..400 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run effect give @s slowness 1 129 true
execute if score 3tick specialTick matches 301..400 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run effect give @s resistance 1 129 true
execute if score 3tick specialTick matches 301..400 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run attribute @s jump_strength modifier add item:3_item_nojump -1 add_multiplied_total

# 타이머 표시
execute if score 3tick specialTick matches 381..400 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run title @a actionbar [{"text":"연주 중... ","color":"blue"},{"text":"5","color":"green","bold":true},{"text":"초 남음","color":"white","bold":false}]
execute if score 3tick specialTick matches 361..380 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run title @a actionbar [{"text":"연주 중... ","color":"blue"},{"text":"4","color":"green","bold":true},{"text":"초 남음","color":"white","bold":false}]
execute if score 3tick specialTick matches 341..360 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run title @a actionbar [{"text":"연주 중... ","color":"blue"},{"text":"3","color":"green","bold":true},{"text":"초 남음","color":"white","bold":false}]
execute if score 3tick specialTick matches 321..340 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run title @a actionbar [{"text":"연주 중... ","color":"blue"},{"text":"2","color":"green","bold":true},{"text":"초 남음","color":"white","bold":false}]
execute if score 3tick specialTick matches 301..320 at @a[tag=itemUsed3User] as @a[distance=0..10,tag=participating] run title @a actionbar [{"text":"연주 중... ","color":"blue"},{"text":"1","color":"green","bold":true},{"text":"초 남음","color":"white","bold":false}]


# 돌리는 것을 멈추기, 한놈 목 꺾어 죽이기 (귀마개 낀 사람 제외)
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[distance=0..11,tag=participating] run attribute @s jump_strength modifier remove item:3_item_nojump
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.cat
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.chirp
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.pigstep
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.ward
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.far
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.blocks
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.otherside
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] run stopsound @a block music_disc.precipice
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[distance=0..10,limit=1,sort=random,tag=participating,tag=!itemUsed5] run tag @s add okarinaDanceDeath
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run gamerule showDeathMessages false
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run kill @s
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run tellraw @a [{"selector":"@s"},{"text":"이(가) "},{"selector": "@a[limit=1,tag=itemUsed3User]"},{"text":"의 연주를 듣고 신나게 춤을 추다가 목이 꺾여 사망했습니다."}]
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run gamerule showDeathMessages true
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run scoreboard players add @a[tag=itemUsed3User] killedItem 1
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run scoreboard players add @a[tag=itemUsed3User] killCounts 1
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=okarinaDanceDeath] run tag @s remove okarinaDanceDeath

# 틱 300일 때, 귀마개 낀 사람이 있다면 터트리기
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] at @a[tag=itemUsed5] run playsound entity.item.break block @a ~ ~ ~ 2 1
execute if score 3tick specialTick matches 300 as @a[tag=itemUsed3User] at @a[tag=itemUsed5] run particle block{block_state:"minecraft:oak_button"} ~ ~1.5 ~ 0 0 0 0.5 100
execute if score 3tick specialTick matches 300 at @a[tag=itemUsed3User] as @a[tag=itemUsed5] run item replace entity @s armor.head with air

# 쿨다운
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 281..300 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 15초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 261..280 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 14초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 241..260 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 13초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 221..240 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 12초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 201..220 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 11초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 181..200 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 10초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 161..180 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 9초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 141..160 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 8초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 121..140 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 7초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 101..120 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 6초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 81..100 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 5초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 61..80 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 4초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 41..60 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 3초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 21..40 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 2초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]
execute as @a[limit=1,nbt={SelectedItem:{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}}] if score 3tick specialTick matches 1..20 run item replace entity @s weapon.mainhand with carrot_on_a_stick[custom_name='[{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"},{"text":" [쿨다운: 1초 남음]","color":"red","bold":true}]',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=false]

# 스코어보드 읎애기
execute as @a[limit=1,nbt={Inventory:[{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}]}] run scoreboard players remove 3tick specialTick 1

# 마무리
tag @a remove item3GetP
execute if score 3tick specialTick matches 0 as @a[limit=1,nbt={Inventory:[{"id":"minecraft:carrot_on_a_stick",components:{"minecraft:custom_data":{specialNo:3},"minecraft:enchantment_glint_override":false}}]}] run tag @s add item3GetP
execute if score 3tick specialTick matches 0 as @a[tag=item3GetP] run clear @s carrot_on_a_stick[custom_data={specialNo:3}]
execute if score 3tick specialTick matches 0 as @a[tag=item3GetP] run give @s carrot_on_a_stick[custom_name='{"color":"#2B1CFF","italic":false,"text":"5.1 서라운드 오카리나"}',item_model="rabbit_foot",lore=['[{"bold":true,"color":"yellow","italic":false,"keybind":"key.use"},{"bold":false,"color":"white","text":"을(를) 사용하여 "},{"bold":false,"color":"white","text":"오카리나를 불 수 있습니다."}]','[{"color":"white","italic":false,"text":"오카리나를 불기 시작하면 "},{"bold":true,"color":"aqua","text":"반경 10블럭 내의 플레이어들이 단체로 춤을 춥니다."}]','[{"color":"white","italic":false,"text":"춤은"},{"bold":true,"color":"green","italic":false,"text":" 총 5초"},"동안 지속되며, 춤이 끝나면",{"bold":true,"color":"red","text":" 춤을 추던 사람 중 한 명이 목이 꺾여 사망합니다."}]','[{"bold":true,"color":"dark_red","italic":false,"text":"물론 자신도 사망할 수 있습니다."},{"text":" 기본적으로 춤 추는 사람들은 모두 데미지를 받지 않습니다.","color":"green","bold":false,"italic":false}]','[""]','{"color":"red","italic":false,"text":"쿨타임: 15초"}'],custom_data={specialNo:3},enchantment_glint_override=true] 1
execute if score 3tick specialTick matches 0 as @a[tag=itemUsed3User] run tag @s remove itemUsed3User